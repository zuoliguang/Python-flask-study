<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
        <title>日志系统</title>
        <link href="/static/bootstrap/css/bootstrap.min.css" title="" rel="stylesheet" />
        <link title="" href="/static/style/layout-style.css" rel="stylesheet" type="text/css"  />
        <link title="blue" href="/static/style/dermadefault.css" rel="stylesheet" type="text/css"/>
        <link title="" href="/static/style/templatecss.css" rel="stylesheet" type="text/css" />
        
        <script src="/static/javascript/jquery-1.11.1.min.js" type="text/javascript"></script>
        <script src="/static/javascript/jquery.cookie.js" type="text/javascript"></script>
        <script src="/static/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    </head>

    <body>
        <nav class="nav navbar-default navbar-mystyle navbar-fixed-top">
            <div class="navbar-header">
                <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> 
                    <span class="icon-bar"></span> 
                    <span class="icon-bar"></span> 
                    <span class="icon-bar"></span> 
                </button>
                <a class="navbar-brand mystyle-brand">
                    <span class="glyphicon glyphicon-time"></span>
                </a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="li-border">
                        <a class="mystyle-color" href="#" style="font-size: 20px">日志系统 <span style="font-size: 12px">V {{ version }}</span></a>
                    </li>
                </ul>
            
                <ul class="nav navbar-nav pull-right">

                    <!-- <li class="dropdown li-border">
                        <a href="#" class="dropdown-toggle mystyle-color" data-toggle="dropdown">
                            帮助文档<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="/help">帮助文档</a></li>
                        </ul>
                    </li> -->

                    <li class="dropdown li-border">
                        <a href="#" class="dropdown-toggle mystyle-color" data-toggle="dropdown">
                            {{ username }}<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="/logout">退出</a></li>
                        </ul>
                    </li>

                </ul>
            </div>
        </nav>


        <div class="down-main">
            <div class="left-main left-full">
                <div class="sidebar-fold">
                    <span class="glyphicon glyphicon-menu-hamburger"></span>
                </div>

                <div class="subNavBox">
                    <div class="sBox">
                        <ul class="navContent" >
                            <li class="active" id="home_page">
                                <a href="/">
                                    <span class="sublist-icon glyphicon glyphicon-home"></span><span class="sub-title">系统首页</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="subNavBox">
                    <div class="sBox">
                        <div class="subNav sublist-down">
                            <span class="title-icon glyphicon glyphicon-chevron-down"></span>
                            <span class="sublist-title">日志管理</span>
                        </div>
                        <ul class="navContent" style="display:block;">
                            
                            <li {% if request.url_rule is equalto(current_url) %} class="active" {% endif %}>
                                <div class="showtitle" style="width:100px;"> 日志列表 </div>
                                <a href="{{ url_for('loglist') }}">
                                    <span class="sublist-icon glyphicon glyphicon-th-list"></span>
                                    <span class="sub-title">日志列表</span>
                                </a>
                            </li>

                            <li {% if request.url_rule is equalto(current_url) %} class="active" {% endif %}>
                                <div class="showtitle" style="width:100px;"> 压力分布 </div>
                                <a href="{{ url_for('pv') }}">
                                    <span class="sublist-icon glyphicon glyphicon-bookmark"></span>
                                    <span class="sub-title">压力分布</span>
                                </a>
                            </li>

                            <!-- <li >
                                <div class="showtitle" style="width:100px;">
                                    使用帮助
                                </div>
                                <a href="/help">
                                    <span class="sublist-icon glyphicon glyphicon-question-sign"></span>
                                    <span class="sub-title">使用帮助</span>
                                </a>
                            </li> -->

                        </ul>
                    </div>
                </div>

                <!-- <div class="subNavBox">
                    <div class="sBox">
                        <div class="subNav sublist-down">
                            <span class="title-icon glyphicon glyphicon-chevron-down"></span>
                            <span class="sublist-title">资源管理</span>
                        </div>
                        <ul class="navContent" style="display:block">

                            <li >
                            <div class="showtitle" style="width:100px;">
                                服务器
                            </div>
                            <a href="/server/list">
                                <span class="sublist-icon glyphicon glyphicon-hdd"></span>
                                <span class="sub-title">服务器</span>
                            </a>
                            </li>
                        </ul>
                    </div>
                </div> -->

                <!-- <div class="subNavBox">
                    <div class="sBox">
                        <div class="subNav sublist-down">
                            <span class="title-icon glyphicon glyphicon-chevron-down"></span>
                            <span class="sublist-title">账户管理</span>
                        </div>
                        <ul class="navContent" style="display:block">
                            
                            <li >
                                <div class="showtitle" style="width:100px;">
                                    资料修改
                                </div>
                                <a href="/profile">
                                    <span class="sublist-icon glyphicon glyphicon-user"></span>
                                    <span class="sub-title">资料修改</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div> -->


            </div>

            <div class="right-product view-product right-full">
                <!--message     start-->
                <div class="message">
                    <div class="alert alert-danger box" role="alert" style="padding: 0px; line-height: 40px">
                        <div class="col-sm-1 pull-right">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        </div>

                        <div class="col-sm-11 pull-left">
                            <strong id="message">保存成功</strong>
                        </div>
                    </div>
                </div>
                <!--message     end-->
                {% block body %}{% endblock %}
            </div>
        </div>
        
        <script type="text/javascript">
            function alert_message(message,addClass,removeClass)
            {
                $('.box').addClass(addClass);
                $('.box').removeClass(removeClass);
                $("#message").html(message);
                $('.message').fadeIn(1000);
                $('.message').fadeOut(5000);
            }

            $(function(){

                var cookie_style = $.cookie("mystyle"); 
                if(cookie_style!=null){ 
                    $("link[title!='']").attr("disabled","disabled"); 
                    $("link[title='"+cookie_style+"']").removeAttr("disabled"); 
                } 

                /*左侧导航栏显示隐藏功能*/
                $(".subNav").click(function(){              
                    /*显示*/
                    if($(this).find("span:first-child").attr('class')=="title-icon glyphicon glyphicon-chevron-down")
                    {
                        $(this).find("span:first-child").removeClass("glyphicon-chevron-down");
                        $(this).find("span:first-child").addClass("glyphicon-chevron-up");
                        $(this).removeClass("sublist-down");
                        $(this).addClass("sublist-up");
                    }
                    /*隐藏*/
                    else
                    {
                        $(this).find("span:first-child").removeClass("glyphicon-chevron-up");
                        $(this).find("span:first-child").addClass("glyphicon-chevron-down");
                        $(this).removeClass("sublist-up");
                        $(this).addClass("sublist-down");
                    }   
                    // 修改数字控制速度， slideUp(500)控制卷起速度
                    $(this).next(".navContent").slideToggle(300).siblings(".navContent").slideUp(300);
                })

                /*左侧导航栏缩进功能*/
                $(".left-main .sidebar-fold").click(function(){
                    if($(this).parent().attr('class')=="left-main left-full") {
                        $(this).parent().removeClass("left-full");
                        $(this).parent().addClass("left-off");
                        $(this).parent().parent().find(".right-product").removeClass("right-full");
                        $(this).parent().parent().find(".right-product").addClass("right-off");
                    } else {
                        $(this).parent().removeClass("left-off");
                        $(this).parent().addClass("left-full"); 
                        $(this).parent().parent().find(".right-product").removeClass("right-off");
                        $(this).parent().parent().find(".right-product").addClass("right-full"); 
                    }
                })  
             
                /*左侧鼠标移入提示功能*/
                $(".sBox ul li").mouseenter(function(){
                    if($(this).find("span:last-child").css("display")=="none")
                    {$(this).find("div").show();}
                    }).mouseleave(function(){$(this).find("div").hide();})  
                });

                /*全选*/
                $("input[name=all_check]").click(function(){
                    var all_status = this.checked;
                    //全选
                    if(all_status == true){
                        $(".chk").find("input[type=checkbox]").each(function(){
                            if($(this).val()>0){
                                $(this).prop("checked",true);
                            }
                        });
                    }
                    if(all_status == false){
                        //反选
                        $(".chk").find("input[type=checkbox]:checked").each(function(){
                            if($(this).val()>0){
                                $(this).prop("checked",false);
                            }
                        });
                    }
                });


                //服务器时间
                Date.prototype.Format = function (fmt) {
                    var o = {
                        "M+": this.getMonth() + 1,
                        "d+": this.getDate(),
                        "h+": this.getHours(),
                        "m+": this.getMinutes(), 
                        "s+": this.getSeconds(),
                        "q+": Math.floor((this.getMonth() + 3) / 3),
                        "S": this.getMilliseconds()
                    };
                    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
                    for (var k in o)
                    if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
                    return fmt;
                }

                function setTime(initTime,serverTime) {
                    ellapsedTime = new Date().getTime()-initTime;
                    $('#server-time').html('当前服务器时间: <strong>'+new Date(serverTime+ellapsedTime).Format("yyyy-MM-dd hh:mm:ss")+'</strong>');
                    setTimeout('setTime('+initTime+','+serverTime+');',500);
                }

        </script>
    </body>
</html>
